{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/mongo/local_collection_driver.js","filenameRelative":"/packages/mongo/local_collection_driver.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/mongo/local_collection_driver.js.map","sourceFileName":"/packages/mongo/local_collection_driver.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"local_collection_driver"},"ignored":false,"code":"LocalCollectionDriver = function LocalCollectionDriver() {\n  var self = this;\n  self.noConnCollections = {};\n};\n\nvar ensureCollection = function ensureCollection(name, collections) {\n  if (!(name in collections)) collections[name] = new LocalCollection(name);\n  return collections[name];\n};\n\n_.extend(LocalCollectionDriver.prototype, {\n  open: function () {\n    function open(name, conn) {\n      var self = this;\n      if (!name) return new LocalCollection();\n      if (!conn) {\n        return ensureCollection(name, self.noConnCollections);\n      }\n      if (!conn._mongo_livedata_collections) conn._mongo_livedata_collections = {};\n      // XXX is there a way to keep track of a connection's collections without\n      // dangling it off the connection object?\n      return ensureCollection(name, conn._mongo_livedata_collections);\n    }\n\n    return open;\n  }()\n});\n\n// singleton\nLocalCollectionDriver = new LocalCollectionDriver();","ast":null,"map":{"version":3,"sources":["/packages/mongo/local_collection_driver.js"],"names":["LocalCollectionDriver","self","noConnCollections","ensureCollection","name","collections","LocalCollection","_","extend","prototype","open","conn","_mongo_livedata_collections"],"mappings":"AAAAA,wBAAwB,iCAAY;AAClC,MAAIC,OAAO,IAAX;AACAA,OAAKC,iBAAL,GAAyB,EAAzB;AACD,CAHD;;AAKA,IAAIC,mBAAmB,SAAnBA,gBAAmB,CAAUC,IAAV,EAAgBC,WAAhB,EAA6B;AAClD,MAAI,EAAED,QAAQC,WAAV,CAAJ,EACEA,YAAYD,IAAZ,IAAoB,IAAIE,eAAJ,CAAoBF,IAApB,CAApB;AACF,SAAOC,YAAYD,IAAZ,CAAP;AACD,CAJD;;AAMAG,EAAEC,MAAF,CAASR,sBAAsBS,SAA/B,EAA0C;AACxCC;AAAM,kBAAUN,IAAV,EAAgBO,IAAhB,EAAsB;AAC1B,UAAIV,OAAO,IAAX;AACA,UAAI,CAACG,IAAL,EACE,OAAO,IAAIE,eAAJ,EAAP;AACF,UAAI,CAAEK,IAAN,EAAY;AACV,eAAOR,iBAAiBC,IAAjB,EAAuBH,KAAKC,iBAA5B,CAAP;AACD;AACD,UAAI,CAAES,KAAKC,2BAAX,EACED,KAAKC,2BAAL,GAAmC,EAAnC;AACF;AACA;AACA,aAAOT,iBAAiBC,IAAjB,EAAuBO,KAAKC,2BAA5B,CAAP;AACD;;AAZD;AAAA;AADwC,CAA1C;;AAgBA;AACAZ,wBAAwB,IAAIA,qBAAJ,EAAxB","file":"/packages/mongo/local_collection_driver.js.map","sourcesContent":["LocalCollectionDriver = function () {\n  var self = this;\n  self.noConnCollections = {};\n};\n\nvar ensureCollection = function (name, collections) {\n  if (!(name in collections))\n    collections[name] = new LocalCollection(name);\n  return collections[name];\n};\n\n_.extend(LocalCollectionDriver.prototype, {\n  open: function (name, conn) {\n    var self = this;\n    if (!name)\n      return new LocalCollection;\n    if (! conn) {\n      return ensureCollection(name, self.noConnCollections);\n    }\n    if (! conn._mongo_livedata_collections)\n      conn._mongo_livedata_collections = {};\n    // XXX is there a way to keep track of a connection's collections without\n    // dangling it off the connection object?\n    return ensureCollection(name, conn._mongo_livedata_collections);\n  }\n});\n\n// singleton\nLocalCollectionDriver = new LocalCollectionDriver;\n"]},"hash":"feba5f442f5020981bdba615d6fe29ed3fe5b771"}
